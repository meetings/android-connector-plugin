<?xml version="1.0" encoding="UTF-8"?>
<plugin xmlns="http://www.phonegap.com/ns/plugins/1.0"
    xmlns:android="http://schemas.android.com/apk/res/android"
    id="gs.meetin.connector"
    version="2.5.0">

    <name>Meetin.gs Calendar connector plugin</name>

    <description>Sync device calendar to meetin.gs back end</description>

    <license>Apache 2.0</license>

    <engines>
      <engine name="cordova" version=">=3.4.0" />
    </engines>

    <js-module src="www/CalendarConnector.js" name="CalendarConnector">
         <clobbers target="CalendarConnector" />
     </js-module>

    <!-- android -->
    <platform name="android">

        <config-file target="res/xml/config.xml" parent="/widget">
            <feature name="CalendarConnectorPlugin">
                <param name="android-package" value="gs.meetin.connector.CalendarConnectorPlugin"/>
                <param name="onload" value="true" />
            </feature>
        </config-file>

        <config-file target="AndroidManifest.xml" parent="/manifest">
            <uses-permission android:name="android.permission.INTERNET" />
            <uses-permission android:name="android.permission.READ_CALENDAR" />
            <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
        </config-file>

        <config-file target="AndroidManifest.xml" parent="/manifest/application">
            <receiver android:name="gs.meetin.connector.AutoStart">
                <intent-filter>
                    <action android:name="android.intent.action.BOOT_COMPLETED" />
                    <action android:name="restartService" />
                </intent-filter>
            </receiver>

            <service
                android:name="gs.meetin.connector.ConnectorService"
                android:enabled="true"
                android:exported="false" >
            </service>

        </config-file>

        <source-file src="src/android/AutoStart.java" target-dir="src/gs/meetin/connector" />
        <source-file src="src/android/CalendarConnectorPlugin.java" target-dir="src/gs/meetin/connector" />
        <source-file src="src/android/CalendarManager.java" target-dir="src/gs/meetin/connector" />
        <source-file src="src/android/ConnectorService.java" target-dir="src/gs/meetin/connector" />
        <source-file src="src/android/Constants.java" target-dir="src/gs/meetin/connector" />
        <source-file src="src/android/SessionManager.java" target-dir="src/gs/meetin/connector" />
        <source-file src="src/android/SuggestionManager.java" target-dir="src/gs/meetin/connector" />

        <source-file src="src/android/adapters/LoginAdapter.java" target-dir="src/gs/meetin/connector/adapters" />
        <source-file src="src/android/adapters/SessionAdapter.java" target-dir="src/gs/meetin/connector/adapters" />

        <source-file src="src/android/dto/ApiError.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/Attendee.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/CalendarSuggestion.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/LoginRequest.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/MtnResponse.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/PinRequest.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/SourceContainer.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/SuggestionBatch.java" target-dir="src/gs/meetin/connector/dto" />
        <source-file src="src/android/dto/SuggestionSource.java" target-dir="src/gs/meetin/connector/dto" />

        <source-file src="src/android/events/ErrorEvent.java" target-dir="src/gs/meetin/connector/events" />
        <source-file src="src/android/events/Event.java" target-dir="src/gs/meetin/connector/events" />
        <source-file src="src/android/events/SessionEvent.java" target-dir="src/gs/meetin/connector/events" />
        <source-file src="src/android/events/SuggestionEvent.java" target-dir="src/gs/meetin/connector/events" />
        <source-file src="src/android/events/UIEvent.java" target-dir="src/gs/meetin/connector/events" />

        <source-file src="src/android/services/LoginService.java" target-dir="src/gs/meetin/connector/services" />
        <source-file src="src/android/services/SuggestionService.java" target-dir="src/gs/meetin/connector/services" />

        <source-file src="src/android/utils/DateHelper.java" target-dir="src/gs/meetin/connector/utils" />
        <source-file src="src/android/utils/Device.java" target-dir="src/gs/meetin/connector/utils" />
        <source-file src="src/android/utils/Dialogs.java" target-dir="src/gs/meetin/connector/utils" />

        <source-file src="src/android/gson-2.3.1.jar" target-dir="libs/" />
        <source-file src="src/android/joda-time-2.7.jar" target-dir="libs/" />
        <source-file src="src/android/eventbus-2.4.0.jar" target-dir="libs/" />
        <source-file src="src/android/retrofit-1.9.0.jar" target-dir="libs/" />

    </platform>
</plugin>
